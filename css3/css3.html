<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
<meta charset="utf-8" />
<title>animation_CSS参考手册_web前端开发参考手册系列</title>
<meta name="author" content="Joy Du(飘零雾雨), dooyoe@gmail.com, www.doyoe.com" />
<style>
*{margin:0;padding:0;}
html,body{height:100%;width:100%;}
.page{height:100%;width:100%;position:relative;background:#a00;}
.p1{background:#0a0;}
.p2{background:#00a;}
.p0 h3{color:#fff;line-height:30px;font-weight:bold;position:absolute;top:30px;
	left:50px;
	-webkit-transform:translate(-2000px, 0);
	-webkit-transition: -webkit-transform 2s;
}
.p0 p{color:#fff;line-height:30px;font-weight:bold;position:absolute;top:300px;
	left:50px;
	-webkit-transform:translate(0, 3000px);
	-webkit-transition: -webkit-transform 2s;
}
.load h3{-webkit-transform:translate(0, 0);}
.load p{-webkit-transform:translate(0, 0);}

.p1 img{position:absolute;top:100px; left:50px;
	opacity: 0;
	-webkit-transition: opacity 3s;
}
.load img{opacity:1;}

.ss{
	position:absolute;top:100px; left:50px;
    -webkit-transform: scale(0);
	-webkit-transition: -webkit-transform 2s;
}
.load .ss{-webkit-transform: scale(1);}
</style>
</head>
<body>
	<div class="page p0">
		<h3>test1</h3>
		<p>this is a test1</p>
	</div>
	<div class="page p1"><img src="http://img4.99114.com/group1/M00/10/2C/wKgGMFVKtUeAIF4eAADB3RLXhgk842.jpg" /></div>
	<div class="page p2"><img class="ss" src="http://img4.99114.com/group1/M00/10/2C/wKgGMFVKtUeAIF4eAADB3RLXhgk842.jpg" /></div>
</body>
<script src="http://auto.sohu.com/upload/201311mqauto/js/jquery-1.8.3.min.js"></script>
<script>
	$(function () {
		var $win = $(window);
		var winh = $win.height();
		var oldpos = 0;
		var dir = 'down';
		var p0 = $('.p0');
		var p1 = $('.p1');
		var p2 = $('.p2');
		var domArr = [p0, p1, p2];
		var topArr = [p0.offset().top, p1.offset().top, p2.offset().top];
		var index = 0;
		var flag = null;
		domArr[index].addClass('load');// = ""
		$win.scroll(function () {
			var pos = $win.scrollTop();
			if(pos - oldpos > 0) {
				dir = 'down';
			} else {
				dir = 'up';
			}
			oldpos = pos;
			if(flag) {
				if($win.scrollTop() == topArr[index]){
					flag = null;
				}
				return;
			}
			if( dir == 'down' ) {
				if(index >= 3) {
					return;
				}
				index++;
				for(var i =0; i < 3; i++){
					domArr[i].removeClass('load');
				}
				console.log('down = '+index);
				$win.scrollTop(topArr[index]);
				domArr[index].addClass('load');// = ""
				flag = true;
			}
			
			if ( dir == 'up' ) {
				if(index <= 0) {
					return;
				}
				index--;
				console.log('up = '+index);
				for(var i =0; i < 3; i++){
					domArr[i].removeClass('load');
				}
				$win.scrollTop(topArr[index]);	
				domArr[index].addClass('load');// = ""
				flag = true;
			}
		});
		
	});
</script>
</html>
			